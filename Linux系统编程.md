# `Linux`系统编程

## `Linux`基本命令

### `shell`

![image-20220926175534292](assets\image-20220926175534292.png)

![image-20220926175549712](assets\image-20220926175549712.png)

### 快捷键

![image-20220926180010429](assets\image-20220926180010429.png)

### 命令

##### 文件目录

![image-20220926191622216](assets\image-20220926191622216.png)

![image-20220926191756988](assets\image-20220926191756988.png)

![image-20220926192118952](assets\image-20220926192118952.png)

`~`表示用户目录`home/xmd`

##### `cd`&&`ls`

![image-20220926192318539](assets\image-20220926192318539.png)

`.`表示当前路径，`..`表示上级目录

![image-20220926192458195](assets\image-20220926192458195.png)

![image-20220926195905575](assets\image-20220926195905575.png)

##### `which`

![image-20220926195932594](assets\image-20220926195932594.png)

##### `mkdir`

![image-20220926200322950](assets\image-20220926200322950.png)

##### `rmdir`

![image-20220926200433688](assets\image-20220926200433688.png)

##### `tough`

![image-20220926200624515](assets\image-20220926200624515.png)

##### `rm`

![image-20220926201538537](assets\image-20220926201538537.png)

递归删文件

![image-20220926201609120](assets\image-20220926201609120.png)

##### `mv`

![image-20220926201655868](assets\image-20220926201655868.png)



![image-20220926201708729](assets\image-20220926201708729.png)

##### `cp`

![image-20220926201810808](assets\image-20220926201810808.png)

![image-20220926201820271](assets\image-20220926201820271.png)

##### `cat`

![image-20220926201912648](assets\image-20220926201912648.png)

##### `more`

![image-20220926202135212](assets\image-20220926202135212.png)

##### `less`

![image-20220926203202022](assets\image-20220926203202022.png)

##### `head`

![image-20220926203246466](assets\image-20220926203246466.png)

##### `tail`

![image-20220926203258352](assets\image-20220926203258352.png)

##### 	`ln`

![image-20220926203319501](assets\image-20220926203319501.png)

![image-20220926203930633](assets\image-20220926203930633.png)

![image-20220926203656192](assets\image-20220926203656192.png)

##### `wc`

![image-20220926204316074](assets\image-20220926204316074.png)

##### `od`

![image-20220926204501876](assets\image-20220926204501876.png)

##### `du`

![image-20220926204755098](assets\image-20220926204755098.png)

##### `df`

![image-20220926204919030](assets\image-20220926204919030.png)

##### 文件信息详解

![image-20220926193717768](assets\image-20220926193717768.png)

![image-20220926193729064](assets\image-20220926193729064.png)

![image-20220926193803436](assets\image-20220926193803436.png)

##### `whoami`

![image-20220927094654429](assets\image-20220927094654429.png)

##### `chmod`

![image-20220927094711418](assets\image-20220927094711418.png)

![image-20220927095612178](assets\image-20220927095612178.png)

##### `chown`

![image-20220927095636251](assets\image-20220927095636251.png)

![image-20220927100504700](assets\image-20220927100504700.png)

##### `chgrp`

![image-20220927100526086](assets\image-20220927100526086.png)

##### `find`

![image-20220927103012373](assets\image-20220927103012373.png)



##### `grep`

![image-20220927103421457](assets\image-20220927103421457.png)

##### `apt-get`

![image-20220927105746411](assets\image-20220927105746411.png)

![image-20220927110137235](assets\image-20220927110137235.png)

##### `deb`安装

![image-20220927110413163](assets\image-20220927110413163.png)

##### 源码安装

![image-20220927110657623](assets\image-20220927110657623.png)

##### `mount`

![image-20220927111053914](assets\image-20220927111053914.png)

挂载`U`盘

![image-20220927111150821](assets\image-20220927111150821.png)

![image-20220927111449165](assets\image-20220927111449165.png)

![image-20220927111528433](assets\image-20220927111528433.png)

##### `dd`

![image-20220927112456183](assets\image-20220927112456183.png)

![image-20220927112555472](assets\image-20220927112555472.png)

![image-20220927112603965](assets\image-20220927112603965.png)

##### `tar`

![image-20220927112715987](assets\image-20220927112715987.png)

![image-20220927112723329](assets\image-20220927112723329.png)

![image-20220927112739329](assets\image-20220927112739329.png)

![image-20220927112921793](assets\image-20220927112921793.png)

![image-20220927112931018](assets\image-20220927112931018.png)

![image-20220927113016422](assets\image-20220927113016422.png)

##### `who`

![image-20220927135800944](assets\image-20220927135800944.png)

##### `ps`

![image-20220927135826581](assets\image-20220927135826581.png)

![image-20220927135836846](assets\image-20220927135836846.png)

![image-20220927135904520](assets\image-20220927135904520.png)

![image-20220927140049426](assets\image-20220927140049426.png)

![image-20220927140116393](assets\image-20220927140116393.png)

![image-20220927140133865](assets\image-20220927140133865.png)

##### `jobs`

![image-20220927140159989](assets\image-20220927140159989.png)

`fg`

![image-20220927140355031](assets\image-20220927140355031.png)

##### `bg`

![image-20220927140444426](assets\image-20220927140444426.png)

##### `kill`

![image-20220927143331327](assets\image-20220927143331327.png)

![image-20220927143347193](assets\image-20220927143347193.png)

##### `env`

![image-20220927144725190](assets\image-20220927144725190.png)

![image-20220927150304060](assets\image-20220927150304060.png)

##### `source`

配置文件内容生效

##### 创建用户

![image-20220927150717664](assets\image-20220927150717664.png)

![image-20220927151739362](assets\image-20220927151739362.png)

##### `root`用户

![image-20220927151605690](assets\image-20220927151605690.png)

##### `ifconfig`

![image-20220927153054137](assets\image-20220927153054137.png)

![image-20220927161413907](assets\image-20220927161413907.png)

##### `netstat`

![image-20220927161432863](assets\image-20220927161432863.png)

![image-20220927161443122](assets\image-20220927161443122.png)

##### `man`

![image-20220927161728382](assets\image-20220927161728382.png)

##### `echo`

![image-20220927165043284](assets\image-20220927165043284.png)

##### `shutdown`

![image-20220927165759446](assets\image-20220927165759446.png)

##### `free`

查看空闲内存

![image-20220927170136791](assets\image-20220927170136791.png)

## `FTP`&`NFS`

`FTP`

文件传输协议

### `NFS`

![image-20220930114342951](assets\image-20220930114342951.png)

`clientA`对目录`mnt`的操作就是对网络文件服务器`nfsserver`的操作

## `SSH`

![image-20220930115227136](assets\image-20220930115227136.png)

## `telnet`

明文传输数据

## `VIM`

### `VI`简介

![image-20220930120529847](assets\image-20220930120529847.png)

### 三种模式

![image-20220930140117945](assets\image-20220930140117945.png)

#### 命令行模式

![image-20220930121511501](assets\image-20220930121511501.png)

#### 文本输入模式

![image-20220930140246234](assets\image-20220930140246234.png)

#### 末行模式

![image-20220930140252393](assets\image-20220930140252393.png)

#### 基础操作

![image-20220930140350053](assets\image-20220930140350053.png)

![image-20220930140419083](assets\image-20220930140419083.png)

![image-20220930140434238](assets\image-20220930140434238.png)

![image-20220930140443878](assets\image-20220930140443878.png)

![image-20220930140453112](assets\image-20220930140453112.png)

![image-20220930140507433](assets\image-20220930140507433.png)

#### `vim`打造`ide`

利用相关配置，打造自定义的`vim`代码编辑`ide`

## `gcc`

![image-20220930162550592](assets\image-20220930162550592.png)

## 静态库和共享库

`soname`是在运行时判断可执行文件是否可以在现在的环境中运行

![image-20220930173756219](assets\image-20220930173756219.png)

### 静态库

![image-20220930191530079](assets\image-20220930191530079.png)

好处是在任何一台电脑上都可以执行，不好的地方在于因为将静态库已经编译进了可执行文件中，所以代码体积大

### 共享库

![image-20220930192828443](assets\image-20220930192828443.png)

好处是代码体积小，但是运行时依赖于本地环境存在共享库且版本号要一致

## 文件`IO`

![image-20220930201150692](assets\image-20220930201150692.png)

![image-20220930201204693](assets\image-20220930201204693.png)

![image-20220930201445239](assets\image-20220930201445239.png)

![image-20220930202635236](assets\image-20220930202635236.png)

![image-20220930204730067](assets\image-20220930204730067.png)

![image-20221002122455341](assets\image-20221002122455341.png)

### 阻塞和非阻塞

![image-20221002140136514](assets\image-20221002140136514.png)

### `open`

![image-20221002193146213](assets\image-20221002193146213.png)

### `ISEEK`

![image-20221002154249620](assets\image-20221002154249620.png)

### `fcntl`

![image-20221002173046396](assets\image-20221002173046396.png)

![image-20221002164619960](assets\image-20221002164619960.png)

### `ioctl`

![image-20221002171535894](assets\image-20221002171535894.png)

![image-20221002173428487](assets\image-20221002173428487.png)

## `ext2`文件系统

![image-20221002193659160](assets\image-20221002193659160.png)

![image-20221002200619481](assets\image-20221002200619481.png)

![image-20221002202137810](assets\image-20221002202137810.png)

### 一个递归所有文件的程序

![image-20221004151230115](assets\image-20221004151230115.png)

![image-20221004151256416](assets\image-20221004151256416.png)

## 虚拟文件系统

![image-20221004170304687](assets\image-20221004170304687.png)

### `dup/dup2`

![image-20221004170328998](assets\image-20221004170328998.png)

![image-20221004170343867](assets\image-20221004170343867.png)

不会新创建`file`结构体，而`open`会新创建`file`结构体

## 进程

![image-20221004185742359](assets\image-20221004185742359.png)

![image-20221004193717070](assets\image-20221004193717070.png)

![image-20221004200032300](assets\image-20221004200032300.png)

### `exec`

![image-20221005111408741](assets\image-20221005111408741.png)

![image-20221005114253160](assets\image-20221005114253160.png)

![image-20221005145809372](assets\image-20221005145809372.png)

### `wait/waitpid`

![image-20221005151804439](assets\image-20221005151804439.png)

![image-20221005161257996](assets\image-20221005161257996.png)

![image-20221005175217069](assets\image-20221005175217069.png)

`options`参数可以选择非阻塞

#### 孤儿进程和僵尸进程

![image-20221005174448508](assets\image-20221005174448508.png)

## 进程间的通信

![image-20221005180503416](assets\image-20221005180503416.png)

### `pipe`

![image-20221006101938660](assets\image-20221006101938660.png)

![image-20221006123015745](assets\image-20221006123015745.png)

![image-20221006123032232](assets\image-20221006123032232.png)

![image-20221006123045870](assets\image-20221006123045870.png)

![image-20221006123124648](assets\image-20221006123124648.png)

![image-20221006134355725](assets\image-20221006134355725.png)

### `fifo`

![image-20221006142426886](assets\image-20221006142426886.png)

![image-20221006143510615](assets\image-20221006143510615.png)

磁盘的索引去索引内核中的`pipe`

### `mmap`

![image-20221006160318806](assets\image-20221006160318806.png)

![image-20221006160340563](assets\image-20221006160340563.png)

![image-20221006163047621](assets\image-20221006163047621.png)

## `gdb`

![image-20221006225914776](assets\image-20221006225914776.png)

![image-20221007105235131](assets\image-20221007105235131.png)

![image-20221007105659899](assets\image-20221007105659899.png)

![image-20221007113155046](assets\image-20221007113155046.png)

## `MakeFile`

![image-20221007122141476](assets\image-20221007122141476.png)

![image-20221007123224974](assets\image-20221007123224974.png)

### `clean`

![image-20221007145516037](assets\image-20221007145516037.png)

![image-20221007150453357](assets\image-20221007150453357.png)

![image-20221007153653368](assets\image-20221007153653368.png)

![image-20221007154311386](assets\image-20221007154311386.png)

![image-20221007154802959](assets\image-20221007154802959.png)

![image-20221007154651950](assets\image-20221007154651950.png)

![image-20221007162122145](assets\image-20221007162122145.png)

## `shell`

![image-20221007164011106](assets\image-20221007164011106.png)

## 信号

![image-20221007195003447](assets\image-20221007195003447.png)

![image-20221007195547648](assets\image-20221007195547648.png)

![image-20221007195628182](assets\image-20221007195628182.png)

![image-20221007195645990](assets\image-20221007195645990.png)

### 进程处理信号的行为

![image-20221007200806067](assets\image-20221007200806067.png)

![image-20221007200822398](assets\image-20221007200822398.png)

![image-20221007200832562](assets\image-20221007200832562.png)

![image-20221007201153844](assets\image-20221007201153844.png)

![image-20221007203512038](assets\image-20221007203512038.png)

![image-20221007225147558](assets\image-20221007225147558.png)

`block`阻塞信号集又叫信号屏蔽字

### `sigaction`

![image-20221008110753565](assets/image-20221008110753565.png)

![image-20221008111838007](assets/image-20221008111838007.png)

### 可重入和时序竞态

#### 可重入函数

在信号捕捉函数里面禁止调用不可重入函数

![image-20221008145953340](assets/image-20221008145953340.png)

![image-20221008150731888](assets/image-20221008150731888.png)

#### 时序竞态

![image-20221008165657364](assets/image-20221008165657364.png)

改进之后

![image-20221008173259938](assets/image-20221008173259938.png)

## 全局变量异步IO

使用定义好的变量和`volatile`关键字

### `SIGCHLD`使用

#### 产生条件

![image-20221008202654857](assets/image-20221008202654857.png)

#### `status`

![image-20221008203250226](assets/image-20221008203250226.png)

## 进程间的关系

### 终端

![image-20221009125547289](assets\image-20221009125547289.png)

![image-20221009131340357](assets/image-20221009131340357.png)

![image-20221009132133880](assets/image-20221009132133880.png)

### 进程组

![image-20221009133521343](assets/image-20221009133521343.png)

### 会话

![image-20221009153230511](assets/image-20221009153230511.png)

## 守护进程

![image-20221009164110106](assets/image-20221009164110106.png)

![image-20221009164414637](assets/image-20221009164414637.png)

## 线程

### 概念

![image-20221010120123849](assets/image-20221010120123849.png)

![image-20221010142223983](assets/image-20221010142223983.png)

线程间共享的资源

![image-20221010142745055](assets/image-20221010142745055.png)

![image-20221010144553802](assets/image-20221010144553802.png)

线程非共享资源

![image-20221010144706519](assets/image-20221010144706519.png)

### 线程创建与回收

![image-20221010160738914](assets/image-20221010160738914.png)

![image-20221010165228595](assets/image-20221010165228595.png)

![image-20221010165539364](assets/image-20221010165539364.png)

等待某个线程结束，释放线程`PCB`

![image-20221010170012643](assets/image-20221010170012643.png)

![image-20221010170304892](assets/image-20221010170304892.png)

![image-20221010173349295](assets/image-20221010173349295.png)

![image-20221010191755947](assets/image-20221010191755947.png)

![image-20221010191833613](assets/image-20221010191833613.png)

![image-20221010192917063](assets/image-20221010192917063.png)

![image-20221010195358421](assets/image-20221010195358421.png)

![image-20221010195442777](assets/image-20221010195442777.png)

![image-20221010201326496](assets/image-20221010201326496.png)

![image-20221010201337808](assets/image-20221010201337808.png)

![image-20221010202337144](assets/image-20221010202337144.png)
